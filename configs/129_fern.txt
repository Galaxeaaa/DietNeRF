# NeRF + consistency loss with 2 views based on 116.
# Like 116, CTR loss is the mean of:
#   - the final (12th) layer cls token consistency loss
#   - negative maximum pairwise patch feature similarity, based on the remaining 12th layer token features
#      - Unlike 115, this is taken across all (2) observed target views
# Adds an adversarial loss based on 083
# This is a copy of 121, run after fixing a memory leak
#   - Uses 1 discriminators
#   - No consistency_loss
expname = 129_fern_2views_patchganfine
basedir = ./logs
datadir = ./data/nerf_llff_data/fern
dataset_type = llff

factor = 8
llffhold = 8

N_rand = 1024
N_samples = 64
N_importance = 64

use_viewdirs = True
raw_noise_std = 1e0

### Modifications from fern.txt below
## Computational options relevant for rendering
save_splits = True
max_train_views = 2
pixel_interp_mode = bilinear
feature_interp_mode = bilinear
checkpoint_rendering = True
i_log_raw_hist = 2
i_log_ctr_img = 16
i_video = 6250
render_autocast = True
no_batching = True

## Shared rendering loss options
render_loss_interval = 16
render_nH = 189
render_nW = 252
render_jitter_rays = True
render_poses = interpolate_train_all
render_poses_translation_jitter_sigma = 0.
render_poses_interpolate_range = [0, 1.]

consistency_loss = none

## PatchGAN/BiCycleGAN discriminator options
patch_gan_loss = True
patch_gan_mode = wgangp
patch_wgan_lambda_gp = 10
patch_gan_G_lam = 0.1
patch_gan_num_Ds = 1
patch_gan_netD = basic_128_multi
patch_gan_D_inner_steps = 2
patch_gan_D_nH = 189
patch_gan_D_nW = 252

chunk = 32768