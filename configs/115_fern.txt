# NeRF + consistency loss with 2 views based on 111.
# CTR loss is the mean of:
#   - the final (12th) layer cls token consistency loss
#   - negative maximum pairwise patch feature similarity, based on the remaining 12th layer token features
expname = 115_fern_2views_ctr_maxpatchmatchsame_clip_vit_layer12
basedir = ./logs
datadir = ./data/nerf_llff_data/fern
dataset_type = llff

factor = 8
llffhold = 8

N_rand = 1024
N_samples = 64
N_importance = 64

use_viewdirs = True
raw_noise_std = 1e0

# Modifications from fern.txt below
save_splits = True
max_train_views = 2

consistency_loss = consistent_with_target_rep
consistency_loss_lam = 0.1
consistency_loss_lam0 = 0.1
consistency_loss_interval = 16
consistency_nH = 189
consistency_nW = 252
consistency_jitter_rays = True
consistency_model_type = clip_vit

consistency_reembed_target = False
consistency_poses = interpolate_train_all
consistency_poses_translation_jitter_sigma = 0.
consistency_poses_interpolate_range = [0, 1.]

checkpoint_rendering = True

i_log_raw_hist = 2
i_log_ctr_img = 16
i_video = 6250

no_batching = True


#### Number of transformer layers to run for ctr loss
consistency_model_num_layers = -1
#### Added these 3 args to be explicit
consistency_size = 224
consistency_interp_mode = bicubic
#### Comparison types
consistency_loss_comparison = [cosine_sim, max_patch_match_sametarget]